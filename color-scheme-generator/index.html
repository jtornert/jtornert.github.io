<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color scheme generator</title>
    <link rel="preconnect" href="https://rsms.me/" />
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css" />
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="/reset/reset.css">
    <link rel="stylesheet" href="/reset/utilities.css">
    <link rel="stylesheet" href="/icons/icons.css">
    <script type="module" src="script.js"></script>
</head>

<body data-init="@get(location.pathname)">
    <div style="display: grid;place-content: center;justify-items: center;" data-remove>
        <p data-font-size="large1">Loading...</p>
        <i class="icon spinner spin" data-font-size="large4"></i>
    </div>
    <main data-cloak>
        <h1 data-font-size="large3" class="print-width">Color scheme generator</h1>
        <div role="form" class="print-width">
            <fieldset data-init="@updateMaxC()" data-on:input="@updateMaxC()">
                <legend>Accent color</legend>
                <label>
                    <span>Lightness: <span data-text="$accentL.toFixed(2)"></span></span>
                    <input type="range" min="0.3" max="0.8" step="0.01" data-bind="accentL">
                </label>
                <label>
                    <span>Chroma: <span data-text="$accentC.toFixed(3)"></span></span>
                    <input type="range"
                           min="0.001" max="0.4"
                           step="0.001" data-bind="accentC">
                </label>
                <label>
                    <span>Hue: <span data-text="$accentH.toFixed(0)"></span></span>
                    <input type="range" min="0" max="359" step="1" data-bind="accentH">
                </label>
            </fieldset>
            <fieldset style="display: block;">
                <legend>Global</legend>
                <fieldset class="form-columns">
                    <legend>Backgrounds</legend>
                    <fieldset>
                        <legend>Light</legend>
                        <label>
                            <span>Chroma: <span data-text="$lightBackgroundChromaScale.toFixed(2)"></span></span>
                            <input type="range" min="0" max="1" step="0.01" data-bind="lightBackgroundChromaScale">
                        </label>
                        <label>
                            <span>Lightness: <span data-text="$lightBackgroundLightness.toFixed(2)"></span></span>
                            <input type="range" min="0.9" max="1" step="0.01" data-bind="lightBackgroundLightness">
                        </label>
                        <label>
                            <span>Spread: <span data-text="$lightBackgroundSpread.toFixed(2)"></span></span>
                            <input type="range" min="0" max="0.2" step="0.01" data-bind="lightBackgroundSpread">
                        </label>
                    </fieldset>
                    <fieldset>
                        <legend>Dark</legend>
                        <label>
                            <span>Chroma: <span data-text="$darkBackgroundChromaScale.toFixed(2)"></span></span>
                            <input type="range" min="0" max="1" step="0.01" data-bind="darkBackgroundChromaScale">
                        </label>
                        <label>
                            <span>Lightness: <span data-text="$darkBackgroundLightness.toFixed(2)"></span></span>
                            <input type="range" min="0" max="0.3" step="0.01" data-bind="darkBackgroundLightness">
                        </label>
                        <label>
                            <span>Spread: <span data-text="$darkBackgroundSpread.toFixed(2)"></span></span>
                            <input type="range" min="0" max="0.2" step="0.01" data-bind="darkBackgroundSpread">
                        </label>
                    </fieldset>
                </fieldset>
                <fieldset class="form-columns">
                    <legend>Texts</legend>
                    <fieldset>
                        <legend>Light</legend>
                        <label>
                            <span>Chroma: <span data-text="$lightTextChromaScale.toFixed(2)"></span></span>
                            <input type="range" min="0" max="1" step="0.01" data-bind="lightTextChromaScale">
                        </label>
                        <label>
                            <span>Lightness: <span data-text="$lightTextStrong.toFixed(2)"></span></span>
                            <input type="range" min="0" max="0.4" step="0.01" data-bind="lightTextStrong">
                        </label>
                    </fieldset>
                    <fieldset>
                        <legend>Dark</legend>
                        <label>
                            <span>Chroma: <span data-text="$darkTextChromaScale.toFixed(2)"></span></span>
                            <input type="range" min="0" max="1" step="0.01" data-bind="darkTextChromaScale">
                        </label>
                        <label>
                            <span>Lightness: <span data-text="$darkTextStrong.toFixed(2)"></span></span>
                            <input type="range" min="0.8" max="1" step="0.01" data-bind="darkTextStrong">
                        </label>
                    </fieldset>
                </fieldset>
            </fieldset>
            <button data-on:click="@post('/accent')">+ Add</button>
            <button data-on:click="$showCss = !$showCss"
                    data-text="$showCss ? 'Hide CSS' : 'Show CSS'"></button>
        </div>
        <pre class="print-width"
             data-show="$showCss"><button data-on:click="@copyToClipboard(el.nextElementSibling.innerText)"></button><code data-text="$showCss && $accents.map((accent, i) => `/* color scheme ${i + 1} */\n${document.getElementById(accent.id).style.cssText}`).join('\n\n').replaceAll('; ', ';\n')"></code></pre>
        <ul id="colors"></ul>
    </main>
    <template id="color">
        <li id="{{id}}" class="color">
            <div class="actions">
                <button
                        data-on:click="$current.id === '{{id}}' ? @put('/accent/' + $current.id) : @edit()"
                        data-text="$current.id === '{{id}}' ? 'Confirm edits' : 'Edit accent color'"></button>
                <button data-on:click="@remove()">Remove</button>
            </div>
            <div data-color-scheme="light">
                {{content}}
            </div>
            <div data-color-scheme="dark">
                {{content}}
            </div>
        </li>
    </template>
    <template id="content">
        <header>
            <strong>Strong</strong>
            <button>Button</button>
        </header>
        <aside>
            <div class="menu-main">
                <h2>Menu</h2>
                <a href="#">Link</a>
            </div>
            <small>v0.1</small>
        </aside>
        <main>
            <h2 data-font-size="large2">Heading</h2>
            <p>
                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ab iusto ipsum hic repellendus in
                praesentium numquam soluta voluptatum quo mollitia.
            </p>
        </main>
    </template>
</body>

</html>